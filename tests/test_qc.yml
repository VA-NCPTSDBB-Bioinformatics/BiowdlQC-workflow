- name: paired_end_zipped
  tags:
    - integration
  command: >-
    bash -c '
    TEST_JSON=tests/integration/paired_end_zipped.json ;
    sed -i "2i\"QC.outputDir\":\"$PWD/test-output\"," $TEST_JSON ;
    cromwell run -i $TEST_JSON QC.wdl'
  stdout:
    contains: "WorkflowSucceededState"
  files:

- name: paired_end
  tags:
    - integration
  command: >-
    bash -c '
    TEST_JSON=tests/integration/paired_end.json ;
    sed -i "2i\"QC.outputDir\":\"$PWD/test-output\"," $TEST_JSON ;
    cromwell run -i $TEST_JSON QC.wdl'
  stdout:
    contains: "WorkflowSucceededState"

- name: single_end_zipped
  tags:
    - integration
  command: >-
    bash -c '
    TEST_JSON=tests/integration/single_end_zipped.json ;
    sed -i "2i\"QC.outputDir\":\"$PWD/test-output\"," $TEST_JSON ;
    cromwell run -i $TEST_JSON QC.wdl'
  stdout:
    contains: "WorkflowSucceededState"

- name: single_end
  tags:
    - integration
  command: >-
    bash -c '
    TEST_JSON=tests/integration/single_end.json ;
    sed -i "2i\"QC.outputDir\":\"$PWD/test-output\"," $TEST_JSON ;
    cromwell run -i $TEST_JSON QC.wdl'
  stdout:
    contains: "WorkflowSucceededState"

# paired end zipped is probably > 99% of the use cases. So we only
# test this one functionally.
- name: functional_paired_end_zipped
  tags:
    - functional
  command: "echo moo"
  stdout:
    contains: "WorkflowSucceededState"